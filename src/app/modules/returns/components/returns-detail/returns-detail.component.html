<div class="card">
  <div class="card-header">
    <h3>{{ id === 'new' ? 'Nueva Solicitud de Devolución' : 'Editar Solicitud de Devolución' }}</h3>
  </div>

  <div class="card-body">
    <form #returnForm="ngForm" (ngSubmit)="save()">

      <!-- Cliente: userId o guestId -->
      <div class="form-group">
        <label>Cliente (Email / Guest ID)</label>
        <input type="text" class="form-control" [(ngModel)]="model.userEmail" name="userEmail" placeholder="Email del usuario" />
        <input type="text" class="form-control mt-2" [(ngModel)]="model.guestId" name="guestId" placeholder="Guest ID (si aplica)" />
      </div>

      <!-- Pedido relacionado -->
      <div class="form-group mt-2">
        <label>ID del Pedido</label>
        <input type="number" class="form-control" [(ngModel)]="model.saleId" name="saleId" placeholder="ID de la venta" required />
      </div>

      <!-- Motivo de la devolución -->
      <div class="form-group mt-2">
        <label>Motivo</label>
        <textarea class="form-control" [(ngModel)]="model.reason" name="reason" rows="3" placeholder="Motivo de la devolución" required></textarea>
      </div>

      <!-- Estado -->
      <div class="form-group mt-2">
        <label>Estado</label>
        <select class="form-control" [(ngModel)]="model.status" name="status">
          <option value="pending">Pendiente</option>
          <option value="reviewing">En revisión</option>
          <option value="approved">Aprobado</option>
          <option value="denied">Denegado</option>
          <option value="refunded">Reembolsado</option>
        </select>
      </div>

      <!-- Notas internas del admin -->
      <div class="form-group mt-2">
        <label>Notas internas</label>
        <textarea class="form-control" [(ngModel)]="model.adminNotes" name="adminNotes" rows="3" placeholder="Notas del administrador"></textarea>
      </div>

      <!-- Botones -->
      <div class="mt-3">
        <button type="submit" class="btn btn-primary">{{ id === 'new' ? 'Crear Devolución' : 'Guardar Cambios' }}</button>
        <button type="button" class="btn btn-secondary ms-2" (click)="cancel()">Cancelar</button>
      </div>

    </form>
  </div>
</div>
