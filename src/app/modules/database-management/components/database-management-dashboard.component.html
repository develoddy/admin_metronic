<div class="card card-custom gutter-b">
  <div class="card-header">
    <div class="card-title">
      <h3 class="card-label">
        <i class="fas fa-database text-danger mr-2"></i>
        Gesti√≥n de Base de Datos
        <small class="text-muted d-block">Operaciones cr√≠ticas - Solo Super Administradores</small>
      </h3>
    </div>
    <div class="card-toolbar">
      <button type="button" 
              class="btn btn-sm btn-light-primary" 
              (click)="refreshDatabaseStatus()" 
              [disabled]="isLoadingStatus">
        <i class="fas fa-sync-alt" [class.fa-spin]="isLoadingStatus"></i>
        Actualizar Estado
      </button>
    </div>
  </div>

  <div class="card-body">
    <!-- ============================================================================ -->
    <!--                              VERIFICACI√ìN DE ACCESO                         -->
    <!-- ============================================================================ -->
    <div *ngIf="!isSuperAdmin" class="alert alert-danger d-flex align-items-center">
      <i class="fas fa-shield-alt mr-3 fa-2x"></i>
      <div>
        <h5 class="mb-2">üö´ Acceso Restringido</h5>
        <p class="mb-0">Solo los <strong>Super Administradores</strong> pueden acceder a la gesti√≥n de base de datos.</p>
        <p class="mb-0 text-muted small">Estas operaciones pueden ser destructivas y requieren permisos especiales.</p>
      </div>
    </div>

    <!-- ============================================================================ -->
    <!--                                ESTADO DEL SISTEMA                           -->
    <!-- ============================================================================ -->
    <div *ngIf="isSuperAdmin" class="card card-custom mb-8">
      <div class="card-header">
        <div class="card-title">
          <h3 class="card-label">
            <i class="fas fa-info-circle text-info mr-2"></i>
            Estado del Sistema
          </h3>
        </div>
      </div>
      <div class="card-body">
        <div *ngIf="isLoadingStatus" class="text-center py-5">
          <div class="spinner-border text-primary" role="status"></div>
          <p class="mt-3 text-muted">Cargando estado de la base de datos...</p>
        </div>

        <div *ngIf="status && !isLoadingStatus" class="row">
          <!-- Informaci√≥n de la Base de Datos -->
          <div class="col-md-6">
            <h6 class="mb-3">
              <i class="fas fa-server text-primary mr-2"></i>
              Base de Datos
            </h6>
            <div class="table-responsive">
              <table class="table table-borderless table-sm">
                <tr>
                  <td class="font-weight-bold">Estado:</td>
                  <td>
                    <span class="badge badge-lg text-white" [class]="getStatusBadgeClass()">
                      <i class="fas fa-circle mr-1"></i>
                      {{ getStatusText() }}
                    </span>
                  </td>
                </tr>
                <tr>
                  <td class="font-weight-bold">Nombre:</td>
                  <td><code>{{ status.database.name }}</code></td>
                </tr>
                <tr>
                  <td class="font-weight-bold">Host:</td>
                  <td><code>{{ status.database.host }}</code></td>
                </tr>
                <tr>
                  <td class="font-weight-bold">Motor:</td>
                  <td><span class="badge badge-light">{{ status.database.dialect?.toUpperCase() }}</span></td>
                </tr>
                <tr>
                  <td class="font-weight-bold">Entorno:</td>
                  <td>
                    <span class="badge text-white" 
                          [class.badge-danger]="status.database.environment === 'production'"
                          [class.badge-warning]="status.database.environment !== 'production'">
                      {{ status.database.environment?.toUpperCase() }}
                    </span>
                  </td>
                </tr>
              </table>
            </div>
          </div>

          <!-- Informaci√≥n de Tablas y Migraciones -->
          <div class="col-md-6">
            <h6 class="mb-3">
              <i class="fas fa-table text-success mr-2"></i>
              Estructura y Migraciones
            </h6>
            <div class="table-responsive">
              <table class="table table-borderless table-sm">
                <tr>
                  <td class="font-weight-bold">Tablas:</td>
                  <td>
                    <span class="badge badge-info">{{ status.tables.count }} tablas</span>
                  </td>
                </tr>
                <tr>
                  <td class="font-weight-bold">Migraciones:</td>
                  <td>
                    <span *ngIf="status.migrations.available" class="badge badge-success">
                      <i class="fas fa-check mr-1"></i>
                      Disponibles
                    </span>
                    <span *ngIf="!status.migrations.available" class="badge badge-warning">
                      <i class="fas fa-exclamation-triangle mr-1"></i>
                      No disponibles
                    </span>
                  </td>
                </tr>
                <tr *ngIf="status.migrations.available && status.migrations.lastMigrations?.length">
                  <td class="font-weight-bold">√öltimas:</td>
                  <td>
                    <small class="text-muted">
                      {{ status.migrations.lastMigrations[0] }}
                      <span *ngIf="status.migrations.lastMigrations.length > 1">
                        (+{{ status.migrations.lastMigrations.length - 1 }} m√°s)
                      </span>
                    </small>
                  </td>
                </tr>
                <tr>
                  <td class="font-weight-bold">Permisos:</td>
                  <td>
                    <span *ngIf="status.permissions.canReset" class="badge badge-warning">
                      <i class="fas fa-unlock mr-1"></i>
                      Reset permitido
                    </span>
                    <span *ngIf="!status.permissions.canReset" class="badge badge-secondary">
                      <i class="fas fa-lock mr-1"></i>
                      Reset bloqueado
                    </span>
                  </td>
                </tr>
              </table>
            </div>
          </div>
        </div>

        <div *ngIf="status && status.tables.list.length > 0" class="mt-4">
          <h6 class="mb-3">Tablas en la Base de Datos ({{ status.tables.count }})</h6>
          <div class="row">
            <div class="col-12">
              <div class="bg-light p-3 rounded">
                <div class="row">
                  <div *ngFor="let table of status.tables.list; let i = index" class="col-md-3 col-sm-6 mb-2">
                    <small class="badge badge-light-primary">
                      <i class="fas fa-table mr-1"></i>
                      {{ table }}
                    </small>
                  </div>
                </div>
              </div>
            </div>
          </div>
        </div>
      </div>
    </div>

    <!-- ============================================================================ -->
    <!--                               OPERACIONES PELIGROSAS                        -->
    <!-- ============================================================================ -->
    <div *ngIf="isSuperAdmin && status" class="row">
      
      <!-- RESET DE BASE DE DATOS -->
      <div class="col-lg-6 mb-8">
        <div class="card card-custom border-danger">
          <div class="card-header bg-light-danger">
            <div class="card-title">
              <h3 class="card-label text-danger">
                <i class="fas fa-exclamation-triangle mr-2"></i>
                Reset Completo de Base de Datos
              </h3>
            </div>
          </div>
          <div class="card-body">
            <!-- BLOQUEO EN PRODUCCI√ìN -->
            <div *ngIf="!status?.permissions?.canReset && status?.database?.environment === 'production'" 
                 class="alert alert-danger">
              <div class="d-flex align-items-start">
                <i class="fas fa-shield-alt text-danger mr-3 mt-1"></i>
                <div class="flex-grow-1">
                  <h6 class="text-danger mb-2">üö® OPERACI√ìN BLOQUEADA EN PRODUCCI√ìN</h6>
                  <p class="mb-2">
                    El reset de base de datos est√° <strong>deshabilitado por seguridad</strong> en el entorno de producci√≥n.
                  </p>
                  <div class="mb-3">
                    <small class="text-muted d-block mb-1">
                      <strong>Error espec√≠fico:</strong> Operaci√≥n no permitida en producci√≥n sin flag especial
                    </small>
                    <small class="text-muted d-block">
                      <strong>Variable requerida:</strong> <code>ALLOW_PROD_DB_RESET=true</code>
                    </small>
                  </div>
                  
                  <div class="border-top pt-3">
                    <h6 class="text-primary mb-2">üí° Opciones disponibles:</h6>
                    <div class="row">
                      <div class="col-md-6 mb-2">
                        <button class="btn btn-sm btn-light-primary btn-block" (click)="showProductionResetInstructions()">
                          <i class="fas fa-info-circle mr-1"></i>
                          Ver Instrucciones
                        </button>
                      </div>
                      <div class="col-md-6 mb-2">
                        <button class="btn btn-sm btn-light-warning btn-block" (click)="downloadBackupFirst()">
                          <i class="fas fa-download mr-1"></i>
                          Crear Backup Manual
                        </button>
                      </div>
                    </div>
                    <div class="row">
                      <div class="col-md-6 mb-2">
                        <button class="btn btn-sm btn-light-info btn-block" (click)="checkEnvironmentStatus()">
                          <i class="fas fa-server mr-1"></i>
                          Ver Estado Sistema
                        </button>
                      </div>
                      <div class="col-md-6 mb-2">
                        <button class="btn btn-sm btn-light-success btn-block" (click)="contactSystemAdmin()">
                          <i class="fas fa-phone mr-1"></i>
                          Contactar Admin
                        </button>
                      </div>
                    </div>
                  </div>
                </div>
              </div>
            </div>

            <!-- BLOQUEO EN OTROS ENTORNOS -->
            <div *ngIf="!status?.permissions?.canReset && status?.database?.environment !== 'production'" 
                 class="alert alert-warning">
              <h6><i class="fas fa-shield-alt mr-2"></i>OPERACI√ìN BLOQUEADA</h6>
              <p class="mb-0">
                Las operaciones de reset est√°n <strong>deshabilitadas</strong> en este entorno por seguridad.
              </p>
              <small class="text-muted">
                Para habilitar, configure <code>ALLOW_DB_MANAGEMENT=true</code> en las variables de entorno.
              </small>
            </div>

            <div class="alert alert-danger">
              <h6><i class="fas fa-skull-crossbones mr-2"></i>OPERACI√ìN DESTRUCTIVA</h6>
              <p class="mb-0">Esta operaci√≥n <strong>BORRAR√Å TODOS LOS DATOS</strong> y recrear√° todas las tablas desde cero.</p>
            </div>

            <form [class.disabled-form]="!status?.permissions?.canReset">
              <!-- Confirmaci√≥n principal -->
              <div class="form-group">
                <div class="checkbox-list">
                  <label class="checkbox">
                    <input type="checkbox" 
                           [(ngModel)]="resetForm.confirmReset" 
                           name="confirmReset"
                           [disabled]="!status?.permissions?.canReset">
                    <span></span>
                    <strong class="text-danger">Confirmo que quiero BORRAR TODOS LOS DATOS</strong>
                  </label>
                </div>
              </div>

              <!-- Texto de confirmaci√≥n -->
              <div class="form-group" *ngIf="resetForm.confirmReset">
                <label class="form-label font-weight-bold text-danger">
                  Escriba exactamente: "{{ securityConfig.requiredConfirmationText }}"
                </label>
                <input type="text" 
                       class="form-control" 
                       [(ngModel)]="resetForm.confirmText"
                       name="confirmText"
                       placeholder="Escriba el texto exacto..."
                       [disabled]="!status?.permissions?.canReset"
                       [class.is-invalid]="resetForm.confirmText && resetForm.confirmText !== securityConfig.requiredConfirmationText">
                <div class="invalid-feedback">
                  El texto debe ser exactamente: "{{ securityConfig.requiredConfirmationText }}"
                </div>
              </div>

              <!-- Crear backup antes -->
              <div class="form-group" *ngIf="resetForm.confirmReset">
                <div class="checkbox-list">
                  <label class="checkbox">
                    <input type="checkbox" 
                           [(ngModel)]="resetForm.createBackupFirst" 
                           name="createBackupFirst"
                           [disabled]="!status?.permissions?.canReset">
                    <span></span>
                    <strong class="text-success">Crear backup autom√°tico antes del reset (RECOMENDADO)</strong>
                  </label>
                </div>
              </div>

              <!-- Motivo -->
              <div class="form-group" *ngIf="resetForm.confirmReset">
                <label class="form-label font-weight-bold">Motivo del reset</label>
                <textarea class="form-control" 
                          rows="3" 
                          [(ngModel)]="resetForm.reason"
                          name="reason"
                          placeholder="Explique por qu√© necesita resetear la base de datos..."
                          [disabled]="!status?.permissions?.canReset"
                          required></textarea>
              </div>

              <!-- Bot√≥n de reset -->
              <button type="button" 
                      class="btn btn-danger btn-lg btn-block font-weight-bold"
                      [disabled]="!status?.permissions?.canReset ||
                                 !resetForm.confirmReset || 
                                 resetForm.confirmText !== securityConfig.requiredConfirmationText || 
                                 !resetForm.reason.trim() || 
                                 isResetting"
                      (click)="resetDatabase()">
                <i class="fas mr-2" 
                   [class.fa-bomb]="!isResetting"
                   [class.fa-spinner]="isResetting"
                   [class.fa-spin]="isResetting"></i>
                {{ isResetting ? 'Reseteando Base de Datos...' : 'RESETEAR BASE DE DATOS' }}
              </button>
            </form>
          </div>
        </div>
      </div>


    </div>

    <!-- ============================================================================ -->
    <!--                              GESTI√ìN DE MIGRACIONES                         -->
    <!-- ============================================================================ -->
    <div *ngIf="isSuperAdmin && status" class="row">
      
      <!-- MIGRACIONES -->
      <div class="col-lg-12 mb-8">
        <div class="card card-custom border-primary">
          <div class="card-header bg-light-primary">
            <div class="card-title">
              <h3 class="card-label text-primary">
                <i class="fas fa-cogs mr-2"></i>
                Gesti√≥n de Migraciones
              </h3>
            </div>
            <div class="card-toolbar">
              <button type="button" 
                      class="btn btn-sm btn-success mr-2"
                      [disabled]="!migrationsStatus?.pendingMigrations?.length || !isManagementAllowed || isLoadingMigrations"
                      (click)="runAllMigrations()">
                <i class="fas mr-1" 
                   [class.fa-play]="!isLoadingMigrations"
                   [class.fa-spinner]="isLoadingMigrations"
                   [class.fa-spin]="isLoadingMigrations"></i>
                <span *ngIf="!isLoadingMigrations">Ejecutar Todas</span>
                <span *ngIf="isLoadingMigrations">Ejecutando...</span>
              </button>
              <button type="button" 
                      class="btn btn-sm btn-light-primary" 
                      (click)="loadMigrationsStatus()" 
                      [disabled]="isLoadingMigrations">
                <i class="fas fa-sync-alt" [class.fa-spin]="isLoadingMigrations"></i>
              </button>
            </div>
          </div>
          <div class="card-body">
            
            <!-- Loading Estado -->
            <div *ngIf="isLoadingMigrations" class="text-center py-4">
              <div class="spinner-border text-primary" role="status"></div>
              <p class="mt-2 text-muted">Cargando migraciones...</p>
            </div>

            <!-- Tabla de Migraciones -->
            <div *ngIf="!isLoadingMigrations && migrationsStatus">
              
              <!-- Migraciones Pendientes -->
              <div *ngIf="migrationsStatus.pendingMigrations?.length > 0" class="mb-4">
                <h6 class="text-warning mb-3">
                  <i class="fas fa-clock mr-2"></i>
                  Migraciones Pendientes ({{ migrationsStatus.pendingMigrations.length }})
                </h6>
                <div class="table-responsive">
                  <table class="table table-hover table-sm">
                    <thead class="thead-light">
                      <tr>
                        <th>Migraci√≥n Pendiente</th>
                        <th>Descripci√≥n</th>
                        <th width="120">Acciones</th>
                      </tr>
                    </thead>
                    <tbody>
                      <tr *ngFor="let migration of migrationsStatus.pendingMigrations">
                        <td>
                          <code class="text-warning">{{ migration.name || migration }}</code>
                        </td>
                        <td>
                          <small class="text-muted">{{ migration.description || 'Sin descripci√≥n' }}</small>
                        </td>
                        <td>
                          <button type="button" 
                                  class="btn btn-xs btn-success"
                                  [disabled]="!isManagementAllowed || executingMigration === (migration.name || migration)"
                                  (click)="runSingleMigration(migration.name || migration)">
                            <i class="fas" 
                               [class.fa-play]="executingMigration !== (migration.name || migration)"
                               [class.fa-spinner]="executingMigration === (migration.name || migration)"
                               [class.fa-spin]="executingMigration === (migration.name || migration)"></i>
                            <span class="ml-1" *ngIf="executingMigration !== (migration.name || migration)">Execute</span>
                            <span class="ml-1" *ngIf="executingMigration === (migration.name || migration)">...</span>
                          </button>
                        </td>
                      </tr>
                    </tbody>
                  </table>
                </div>
              </div>

              <!-- Sin Migraciones Pendientes -->
              <div *ngIf="!migrationsStatus.pendingMigrations?.length" class="alert alert-success d-flex align-items-center mb-4">
                <i class="fas fa-check-circle mr-3"></i>
                <div>
                  <strong>‚úÖ Base de datos actualizada</strong>
                  <p class="mb-0 text-muted">No hay migraciones pendientes por ejecutar</p>
                </div>
              </div>

              <!-- Migraciones Ejecutadas -->
              <div *ngIf="migrationsStatus.executedMigrations?.length > 0" class="mb-4">
                <h6 class="text-success mb-3">
                  <i class="fas fa-check-circle mr-2"></i>
                  Migraciones Ejecutadas ({{ migrationsStatus.executedMigrations.length }})
                </h6>
                <div class="table-responsive">
                  <table class="table table-hover table-sm">
                    <thead class="thead-light">
                      <tr>
                        <th>Migraci√≥n Ejecutada</th>
                        <th>Estado</th>
                        <th width="120">Acciones</th>
                      </tr>
                    </thead>
                    <tbody>
                      <tr *ngFor="let migration of migrationsStatus.executedMigrations; let i = index">
                        <td>
                          <code class="text-success">{{ migration.name || migration }}</code>
                        </td>
                        <td>
                          <span class="badge badge-success">
                            <i class="fas fa-check mr-1"></i>
                            Executed
                          </span>
                        </td>
                        <td>
                          <button type="button" 
                                  class="btn btn-xs btn-warning"
                                  [disabled]="!isManagementAllowed || executingRollback === (migration.name || migration)"
                                  (click)="rollbackSingleMigration(migration.name || migration)"
                                  title="Hacer rollback de esta migraci√≥n">
                            <i class="fas" 
                               [class.fa-undo]="executingRollback !== (migration.name || migration)"
                               [class.fa-spinner]="executingRollback === (migration.name || migration)"
                               [class.fa-spin]="executingRollback === (migration.name || migration)"></i>
                            <span class="ml-1" *ngIf="executingRollback !== (migration.name || migration)">Rollback</span>
                            <span class="ml-1" *ngIf="executingRollback === (migration.name || migration)">...</span>
                          </button>
                        </td>
                      </tr>
                    </tbody>
                  </table>
                </div>
              </div>

              <!-- Sin Migraciones -->
              <div *ngIf="!migrationsStatus.executedMigrations?.length && !migrationsStatus.pendingMigrations?.length" class="alert alert-info d-flex align-items-center">
                <i class="fas fa-info-circle mr-3"></i>
                <div>
                  <strong>‚ÑπÔ∏è No hay migraciones disponibles</strong>
                  <p class="mb-0 text-muted">No se encontraron archivos de migraci√≥n en el proyecto</p>
                </div>
              </div>

            </div>

            <!-- Error al cargar -->
            <div *ngIf="!isLoadingMigrations && !migrationsStatus" class="alert alert-warning">
              <i class="fas fa-exclamation-triangle mr-2"></i>
              Error al cargar el estado de migraciones
            </div>

            <hr>

            <!-- Rollback de Migraci√≥n -->
            <div>
              <h6 class="mb-3">
                <i class="fas fa-undo text-warning mr-2"></i>
                Rollback de √öltima Migraci√≥n
              </h6>
              <p class="text-muted mb-3">Revierte la √∫ltima migraci√≥n ejecutada. <strong class="text-warning">¬°Usar con precauci√≥n!</strong></p>
              
              <div class="form-group">
                <div class="checkbox-list">
                  <label class="checkbox">
                    <input type="checkbox" [(ngModel)]="rollbackForm.confirmRollback" name="confirmRollback">
                    <span></span>
                    <strong>Confirmo que quiero hacer rollback de la √∫ltima migraci√≥n</strong>
                  </label>
                </div>
              </div>

              <button type="button" 
                      class="btn btn-warning btn-block font-weight-bold"
                      [disabled]="!rollbackForm.confirmRollback || isMigrating"
                      (click)="rollbackMigration()">
                <i class="fas mr-2" 
                   [class.fa-undo]="!isMigrating"
                   [class.fa-spinner]="isMigrating"
                   [class.fa-spin]="isMigrating"></i>
                {{ isMigrating ? 'Ejecutando Rollback...' : 'Hacer Rollback' }}
              </button>
            </div>
            
          </div>
        </div>
      </div>
    </div>

    <!-- ============================================================================ -->
    <!--                              GESTI√ìN DE SEEDERS                             -->
    <!-- ============================================================================ -->
    <div *ngIf="isSuperAdmin && status" class="row">
      
      <!-- SEEDERS -->
      <div class="col-lg-12 mb-8">
        <div class="card card-custom border-info">
          <div class="card-header bg-light-info">
            <div class="card-title">
              <h3 class="card-label text-info">
                <i class="fas fa-database mr-2"></i>
                Gesti√≥n de Seeders
              </h3>
            </div>
            <div class="card-toolbar">
              <button type="button" 
                      class="btn btn-sm btn-success mr-2"
                      [disabled]="!seedersStatus?.availableSeeders?.length || !isManagementAllowed || isLoadingSeeders"
                      (click)="runAllSeeders()">
                <i class="fas mr-1" 
                   [class.fa-play]="!isLoadingSeeders"
                   [class.fa-spinner]="isLoadingSeeders"
                   [class.fa-spin]="isLoadingSeeders"></i>
                <span *ngIf="!isLoadingSeeders">Ejecutar Todos</span>
                <span *ngIf="isLoadingSeeders">Ejecutando...</span>
              </button>
              <button type="button" 
                      class="btn btn-sm btn-light-primary" 
                      (click)="loadSeedersStatus()" 
                      [disabled]="isLoadingSeeders">
                <i class="fas fa-sync-alt" [class.fa-spin]="isLoadingSeeders"></i>
              </button>
            </div>
          </div>
          <div class="card-body">
            
            <!-- Loading Estado -->
            <div *ngIf="isLoadingSeeders" class="text-center py-4">
              <div class="spinner-border text-primary" role="status"></div>
              <p class="mt-2 text-muted">Cargando seeders...</p>
            </div>

            <!-- Tabla de Seeders -->
            <div *ngIf="!isLoadingSeeders && seedersStatus">
              
              <!-- Seeders Disponibles -->
              <div *ngIf="seedersStatus.availableSeeders?.length > 0" class="mb-4">
                <h6 class="text-warning mb-3">
                  <i class="fas fa-clock mr-2"></i>
                  Seeders Disponibles ({{ seedersStatus.availableSeeders.length }})
                </h6>
                <div class="table-responsive">
                  <table class="table table-hover table-sm">
                    <thead class="thead-light">
                      <tr>
                        <th>Seeder Disponible</th>
                        <th>Estado</th>
                        <th width="120">Acciones</th>
                      </tr>
                    </thead>
                    <tbody>
                      <tr *ngFor="let seeder of seedersStatus.availableSeeders">
                        <td>
                          <code class="text-warning">{{ seeder.name }}</code>
                        </td>
                        <td>
                          <span class="badge badge-warning">
                            <i class="fas fa-hourglass-half mr-1"></i>
                            Pendiente
                          </span>
                        </td>
                        <td>
                          <button type="button" 
                                  class="btn btn-xs btn-success"
                                  [disabled]="!isManagementAllowed || executingSeeder === seeder.name"
                                  (click)="runSingleSeeder(seeder.name)">
                            <i class="fas" 
                               [class.fa-play]="executingSeeder !== seeder.name"
                               [class.fa-spinner]="executingSeeder === seeder.name"
                               [class.fa-spin]="executingSeeder === seeder.name"></i>
                            <span class="ml-1" *ngIf="executingSeeder !== seeder.name">Execute</span>
                            <span class="ml-1" *ngIf="executingSeeder === seeder.name">...</span>
                          </button>
                        </td>
                      </tr>
                    </tbody>
                  </table>
                </div>
              </div>

              <!-- Seeders Ejecutados -->
              <div *ngIf="seedersStatus.executedSeeders?.length > 0" class="mb-4">
                <h6 class="text-success mb-3">
                  <i class="fas fa-check-circle mr-2"></i>
                  Seeders Ejecutados ({{ seedersStatus.executedSeeders.length }})
                </h6>
                <div class="table-responsive">
                  <table class="table table-hover table-sm">
                    <thead class="thead-light">
                      <tr>
                        <th>Seeder Ejecutado</th>
                        <th>Estado</th>
                        <th width="120">Acciones</th>
                      </tr>
                    </thead>
                    <tbody>
                      <tr *ngFor="let seeder of seedersStatus.executedSeeders">
                        <td>
                          <code class="text-success">{{ seeder.name }}</code>
                        </td>
                        <td>
                          <span class="badge badge-success">
                            <i class="fas fa-check mr-1"></i>
                            Executed
                          </span>
                        </td>
                        <td>
                          <button type="button" 
                                  class="btn btn-xs btn-warning"
                                  [disabled]="!isManagementAllowed || executingSeeder === seeder.name"
                                  (click)="runSingleSeeder(seeder.name)"
                                  title="Re-ejecutar seeder (sobrescribir√° datos existentes)">
                            <i class="fas" 
                               [class.fa-redo]="executingSeeder !== seeder.name"
                               [class.fa-spinner]="executingSeeder === seeder.name"
                               [class.fa-spin]="executingSeeder === seeder.name"></i>
                            <span class="ml-1" *ngIf="executingSeeder !== seeder.name">Re-run</span>
                            <span class="ml-1" *ngIf="executingSeeder === seeder.name">...</span>
                          </button>
                        </td>
                      </tr>
                    </tbody>
                  </table>
                </div>
              </div>

              <!-- Sin Seeders -->
              <div *ngIf="!seedersStatus.availableSeeders?.length && !seedersStatus.executedSeeders?.length" class="alert alert-info d-flex align-items-center">
                <i class="fas fa-info-circle mr-3"></i>
                <div>
                  <strong>‚ÑπÔ∏è No hay seeders disponibles</strong>
                  <p class="mb-0 text-muted">No se encontraron archivos de seeder en el proyecto</p>
                </div>
              </div>

              <!-- Mensaje informativo sobre seeders -->
              <div *ngIf="seedersStatus.executedSeeders?.length > 0" class="alert alert-info">
                <i class="fas fa-info-circle mr-2"></i>
                <strong>‚ÑπÔ∏è Informaci√≥n sobre seeders:</strong>
                Los seeders se pueden ejecutar m√∫ltiples veces. Los marcados como "Executed" ya contienen datos, 
                ejecutarlos nuevamente puede sobrescribir o duplicar informaci√≥n.
              </div>

            </div>

            <!-- Error al cargar -->
            <div *ngIf="!isLoadingSeeders && !seedersStatus" class="alert alert-warning">
              <i class="fas fa-exclamation-triangle mr-2"></i>
              Error al cargar el estado de seeders
            </div>
            
          </div>
        </div>
      </div>
    </div>

    <!-- ============================================================================ -->
    <!--                              INTEGRACI√ìN CON BACKUPS                        -->
    <!-- ============================================================================ -->
    <div *ngIf="isSuperAdmin && recentBackups?.length > 0" class="card card-custom">
      <div class="card-header">
        <div class="card-title">
          <h3 class="card-label">
            <i class="fas fa-archive text-info mr-2"></i>
            Backups Recientes
          </h3>
        </div>
        <div class="card-toolbar">
          <button type="button" 
                  class="btn btn-sm btn-success" 
                  (click)="createBackup()">
            <i class="fas fa-plus mr-1"></i>
            Crear Backup Manual
          </button>
        </div>
      </div>
      <div class="card-body">
        <div class="alert alert-info">
          <i class="fas fa-lightbulb mr-2"></i>
          <strong>Integraci√≥n con Backups:</strong> 
          Este m√≥dulo se integra con su sistema de backups existente para mayor seguridad en las operaciones.
        </div>
        
        <div class="table-responsive">
          <table class="table table-head-custom table-vertical-center">
            <thead>
              <tr>
                <th>Archivo</th>
                <th>Tama√±o</th>
                <th>Fecha</th>
                <th>Acciones</th>
              </tr>
            </thead>
            <tbody>
              <tr *ngFor="let backup of recentBackups">
                <td>
                  <span class="text-dark font-weight-bolder">{{ backup.filename }}</span>
                </td>
                <td>
                  <span class="badge badge-light">{{ backup.sizeFormatted }}</span>
                </td>
                <td>
                  <span class="text-muted">{{ backup.createdAt | date:'short' }}</span>
                </td>
                <td>
                  <a [routerLink]="['/backups']" class="btn btn-sm btn-clean btn-icon" title="Ver en m√≥dulo de backups">
                    <i class="fas fa-external-link-alt"></i>
                  </a>
                </td>
              </tr>
            </tbody>
          </table>
        </div>
        
        <div class="text-center">
          <a [routerLink]="['/backups']" class="btn btn-light-primary">
            <i class="fas fa-archive mr-2"></i>
            Ver Todos los Backups
          </a>
        </div>
      </div>
    </div>

    <!-- Estado cuando no hay backups -->
    <div *ngIf="isSuperAdmin && recentBackups?.length === 0" class="card card-custom">
      <div class="card-body text-center">
        <i class="fas fa-archive fa-3x text-muted mb-3"></i>
        <h5>No hay backups recientes</h5>
        <p class="text-muted">Se recomienda crear un backup antes de realizar operaciones cr√≠ticas.</p>
        <button type="button" class="btn btn-success" (click)="createBackup()">
          <i class="fas fa-plus mr-2"></i>
          Crear Primer Backup
        </button>
      </div>
    </div>
  </div>
</div>